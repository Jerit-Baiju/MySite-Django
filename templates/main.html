<!DOCTYPE html>
<html lang="en">
  {% load static %}
  {% load cache %}
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
    <meta name="title" content="Jerit Baiju" />
    <meta name="description"
          content="Jerit's Personal Website - Django Application."/>
    <meta name="keywords"
          content="Jerit, Jerit Baiju, jerit.ml, Web developer, vandiperiyar, jerit baiju vandiperiyar,"/>
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://jerit.ml" />
    <meta property="og:title" content="Jerit Baiju" />
    <meta property="og:description"
          content="Jerit's Personal Website - Django Application."/>
    <meta property="og:image" content="https://jerit.ml/static/social.png" />
    <meta name="robots" content="index, follow" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="1 days" />
    <meta name="author" content="Jerit Baiju" />
    {% if dark != True %}
      <meta name="theme-color" content="#f8f9fa" />
    {% else %}
      <meta name="theme-color" content="#212429" />
    {% endif %}
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="icon" href="{% static 'favicon.png' %}" type="image/x-icon" />
    {% cache 86400 bootcss %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
          crossorigin="anonymous"/>
  {% endcache %}
  <link rel="manifest" href="{% url 'manifest' %}" />
</head>
<body class="{% if dark == True %} bg-dark text-white{% else %} bg-light {% endif %}">
  {% include "navbar.html" %}
  <div style="height: 4em"></div>
  <div>
    {% if messages %}
      {% include 'messages.html' %}
    {% endif %}
    {% block content %}
    {% endblock content %}
    {% if hr != False %}<hr />{% endif %}
  </div>
  {% cache 86400 bootjs %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
          crossorigin="anonymous"></script>
{% endcache %}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7JKYDZ7NT5"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-7JKYDZ7NT5');
</script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import {
      initializeApp
  } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
  import {
      getAnalytics
  } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-analytics.js";
  import {
      getMessaging,
      getToken,
      onMessage
  } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-messaging.js"
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
      apiKey: "AIzaSyDnllf521t5GPwIGE9xgp9xn709Qto4lq0",
      authDomain: "jerit-ml.firebaseapp.com",
      projectId: "jerit-ml",
      storageBucket: "jerit-ml.appspot.com",
      messagingSenderId: "31137066487",
      appId: "1:31137066487:web:31a7ead9dd2a081dcf92f2",
      measurementId: "G-W0EZ7CVXGR"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);


  // Get a Firebase Messaging instance
  const messaging = getMessaging(app);
  alert("firebase set")

  function requestPermission() {
      console.log('Requesting permission...');
      Notification.requestPermission().then((permission) => {
          if (permission === 'granted') {
              console.log('Notification permission granted.');
              // Get registration token. Initially this makes a network call, once retrieved
              // subsequent calls to getToken will return from cache.
              getToken(messaging, {
                  vapidKey: 'BC2fdyMeF44rKN5jlNybS4Z-9EhurCkUNTqbWs80OlTwwDuDuNYiXMbOv4t2-NK2ZXl57a-z17UqtcqCskskYbo'
              }).then((currentToken) => {
                  if (currentToken) {
                     console.log(currentToken)
                  } else {
                      // Show permission request UI
                      console.log('No registration token available. Request permission to generate one.');
                      // ...
                  }
              }).catch((err) => {
                  console.log('An error occurred while retrieving token. ', err);
                  // ...
              });
          }
      })
  }
  requestPermission()
  onMessage((payload) => {
  console.log('Message received. ', payload);
  // ...
});
</script>
{% block scripts %}
{% endblock scripts %}
</body>
</html>
